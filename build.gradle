buildscript {
    ext {
        springBootVersion = '1.3.3.RELEASE'
    }
    repositories { jcenter() }
    dependencies {
		classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}") 
	}
}

plugins {
    id 'java'
    id 'org.springframework.boot' version '1.3.3'
    id 'groovy'
    id 'idea'
    id 'jacoco'
    id 'nebula.maven-publish' version '4.4.4'
    id 'nebula.javadoc-jar' version '4.4.4'
    id 'nebula.source-jar' version '4.4.4'
    id 'nebula.maven-apache-license' version '4.4.4'
    id 'nebula.optional-base' version '3.0.3'
    id 'nebula.dependency-lock' version '4.2.0'
    id 'nebula.nebula-release' version '4.0.0'
    id 'nebula.nebula-bintray' version '3.3.2'
    id 'nebula.info' version '3.0.3'
    id 'nebula.contacts' version '3.0.1'
    id 'nebula.integtest' version '3.0.3'
    id 'com.gradle.plugin-publish' version '0.9.3'
    id 'com.github.kt3k.coveralls' version '2.6.3'
}

description 'Release opinions on top of gradle-git'

group = 'com.netflix.nebula'

contacts {
    'mick.burgs@gmail.com' {
        moniker 'Mick Burgsr'
        github 'mickburgs'
    }
}

apply from: 'https://raw.githubusercontent.com/nebula-plugins/nebula-core/59c9e15f561372a8a72bbe13e4fbb114d0ef16f8/common.gradle'

dependencies {
    compile 'com.netflix.nebula:nebula-core:3.0.1'
    compile 'com.netflix.nebula:nebula-bintray-plugin:3.3.2', optional
    compile 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.5', optional
    compile 'org.ajoberstar:gradle-git:1.4.1'
    compile('org.springframework.cloud:spring-cloud-starter-eureka')
    compile('org.springframework.cloud:spring-cloud-starter-feign')
    compile('org.springframework.boot:spring-boot-starter-web')
    testCompile('org.springframework.boot:spring-boot-starter-test') 
}

tasks.withType(Test) {
    maxHeapSize = '1024m'
    jvmArgs "-XX:MaxPermSize=512m"
}

jacocoTestReport {
    executionData = files('build/jacoco/test.exec', 'build/jacoco/integrationTest.exec')
}

pluginBundle {
    plugins {
        nebulaRelease {
            id = 'nebula.nebula-release'
            displayName = 'Nebula Release plugin'
            tags = ['nebula', 'release', 'versioning']
        }
    }
}

task wrapper(type: Wrapper) {
	gradleVersion = '2.9'
}
